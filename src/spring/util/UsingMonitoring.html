# 실무 모니터링 환경 구성 팁

## 모니터링 3단계

1. **대시보드 (전체 관찰)**
- 시스템, 애플리케이션, 비즈니스 메트릭을 한눈에 보는 상위 뷰
- **제품**: Micrometer, Prometheus, Grafana
- **대상**
- 시스템 메트릭: CPU, 메모리
- 애플리케이션 메트릭: 톰캣 쓰레드 풀, DB 커넥션 풀, 호출 수
- 비즈니스 메트릭: 주문수, 취소수 등

2. **애플리케이션 추적 (개별 요청 추적)**
- HTTP 요청 단위로 추적, 마이크로서비스 환경에서는 분산 추적 가능
- **제품**
- 오픈소스: [Pinpoint](https://github.com/pinpoint-apm/pinpoint)(**추천**), Scout
- 상용: 와탭, 제니퍼

3. **로그 (가장 세밀한 추적)**
- 자유로운 커스텀 가능
- **중요 포인트**
- 같은 HTTP 요청을 묶어서 확인 (MDC 활용)
- 일반 로그와 에러 로그는 **파일 분리**
- 에러 로그만 보면 문제 빠르게 파악 가능
- 클라우드 저장 시: 검색 효율을 위해 태그/구분 철저

- **핀포인트 구축 -> 대시보드 설치 -> 로그 순서로 추천**

## 모니터링 활용 정리

- 관찰은 **넓게 시작 (대시보드) → 점점 좁게** (**핀포인트(애플리케이션 추적**, **로그**)) 들어가기
- Pinpoint는 대규모 트래픽 & 마이크로서비스 분산 모니터링에 강력 (실무 강추)

## 알람 (Alerting)

- 모니터링 툴과 슬랙, 문자, 전화 등 **연동**
- **두 가지 레벨 구분** (`경고`슬랙 방, `심각` 슬랙 방 등)
1. **경고 (Warning)**
- 하루 1번 정도 확인하면 되는 수준
- 예) 디스크 사용량 70%, CPU 40%

2. **심각 (Critical)**
- 즉시 확인 필요 → 슬랙 푸시, 문자, 전화
- 예) 디스크 사용량 80%, CPU 50%

- **주의사항**
- 거짓 알람(False Alarm)은 빠르게 제거 (안 그러면 신뢰도↓, “늑대가 나타났다” 현상 발생)

### 마무리

- 이렇게 **대시보드 → 추적 → 로그** 3단계 체계로 접근하고, 알람을 적절히 분류하는 것이 핵심
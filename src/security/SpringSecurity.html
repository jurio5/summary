### 스프링 필터 순서 정리

1️. 클라이언트가 요청 (예: GET /api/users)

2 .Servlet Filter (CORS, 인코딩, 로깅 필터 등 실행)

3️. 스프링 시큐리티 필터 체인 실행 (OAuth2, JWT 필터 등)

4️. Dispatcher Servlet이 요청을 받음 (MVC 중앙 허브 역활), 일종의 라우터 역활, 요청으로 들어 온 API를 관련 컨트롤러에서 찾아서 실행

5️. Interceptor (preHandle 실행) - JWT 토큰 검사 및 인증 확인 후 없으면 요청 차단, 권한 체크 등 (Role)
- 왜 또 추가적인 검증을 진행하냐? 인터셉터는 일종의 방어 코드 역활
- 이 부분에서 탈퇴한 계정인지 같은 추가적인 검증을 하면서 보안

6️. Controller 실행 (요청 처리)

7️. Interceptor (postHandle 실행) 데이터 가공 및 응답 조작
- 데이터를 가공하고 조작한다 라는 뜻은 만약, 컨트롤러가 200ok 라는 Status를 던지면 프론트로 가기 전 헤더에 담아주는 역활을 함

8️. Dispatcher Servlet이 응답을 반환
- 클라이언트에게 적절한 형태(JSON, HTML 등)로 변환해서 전달

9️. Interceptor (afterCompletion 실행) 리소스 예외 처리
- afterCompletion 에서 체크, 언체크 예외를 처리해주기도 하지만, Redis에서 TTL을 설정 한 리프레쉬 토큰의 만료 기간이 지났을 때 여기서 리소스를 정리

10️. 클라이언트가 응답을 받음

![[스프링 시큐리티 필터.png]]


### 필터
- 서블릿이 제공하는 기능


### 인터셉터
- 스프링이 제공하는 기능